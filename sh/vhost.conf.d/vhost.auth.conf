#
#   WARNING:
#   This file is automatically generated by the web application framework
#
#   Edit this file's template at /var/www/sh/vhost.conf.d
#
<VirtualHost *:__SERVER_PORT__>
    ServerName my-server-name
    ServerAlias __SERVER_NAME__
    DocumentRoot __DOCUMENT_ROOT__

    SSLEngine on
    # SSLProtocol -ALL +SSLv3 +TLSv1
    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL

    SSLCertificateFile /etc/ssl/user/my-server-name/my-server-name.crt
    SSLCertificateKeyFile /etc/ssl/user/my-server-name/my-server-name.key

    SSLCACertificateFile /etc/ssl/ca/ca.crt

    SSLVerifyClient require
    SSLVerifyDepth  3

    <Location />
        SSLRequire ( %{SSL_CIPHER} !~ m/^(EXP|NULL)/ \
        and %{SSL_CLIENT_S_DN_O} in {"Accepted Organization 1", "Accepted Organization 2"} \
        and %{SSL_CLIENT_S_DN_OU} in {"Accepted Unit 1", "Accepted Unit 2"} )
    </Location>

    <Directory __DOCUMENT_ROOT__>
        Options +Indexes
        AllowOverride All
    </Directory>

    SSLOptions +StdEnvVars
</VirtualHost>

SSLPassPhraseDialog exec:/etc/ssl/user/my-server-name/my-server-name.pwd.sh